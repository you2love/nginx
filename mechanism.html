<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nginx 内部机制 - 架构与设计</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Nginx 深度学习</h1>
                <p class="tagline">揭秘内部机制，掌握核心配置</p>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link">首页</a>
                <a href="mechanism.html" class="nav-link active">内部机制</a>
                <a href="request-flow.html" class="nav-link">请求处理</a>
                <a href="directives.html" class="nav-link">指令详解</a>
                <a href="configs.html" class="nav-link">应用配置</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <h1 class="page-title">Nginx 内部机制</h1>
                <p class="page-intro">深入理解Nginx的架构设计、模块系统和事件驱动模型</p>
            </div>
        </section>

        <section class="section bg-light">
            <div class="container">
                <h2 class="section-title">Master-Worker 架构</h2>
                <div class="chart-container">
                    <h3 class="chart-title">架构示意图</h3>
                    <div class="flowchart-container">
                        <svg width="600" height="400" viewBox="0 0 600 400">
                            <rect x="225" y="20" width="150" height="50" fill="#009639" rx="5"/>
                            <text x="300" y="50" text-anchor="middle" fill="white" font-weight="bold">Master Process</text>
                            <text x="300" y="70" text-anchor="middle" fill="white" font-size="12">主进程</text>
                            <line x1="300" y1="70" x2="150" y2="120" stroke="#009639" stroke-width="2"/>
                            <line x1="300" y1="70" x2="300" y2="120" stroke="#009639" stroke-width="2"/>
                            <line x1="300" y1="70" x2="450" y2="120" stroke="#009639" stroke-width="2"/>
                            <rect x="75" y="130" width="150" height="50" fill="#0067c0" rx="5"/>
                            <text x="150" y="160" text-anchor="middle" fill="white" font-weight="bold">Worker 1</text>
                            <rect x="225" y="130" width="150" height="50" fill="#0067c0" rx="5"/>
                            <text x="300" y="160" text-anchor="middle" fill="white" font-weight="bold">Worker 2</text>
                            <rect x="375" y="130" width="150" height="50" fill="#0067c0" rx="5"/>
                            <text x="450" y="160" text-anchor="middle" fill="white" font-weight="bold">Worker 3</text>
                            <rect x="100" y="250" width="100" height="30" fill="#5cb85c" rx="3"/>
                            <text x="150" y="270" text-anchor="middle" fill="white" font-size="11">Event Loop</text>
                            <rect x="250" y="250" width="100" height="30" fill="#5cb85c" rx="3"/>
                            <text x="300" y="270" text-anchor="middle" fill="white" font-size="11">Event Loop</text>
                            <rect x="400" y="250" width="100" height="30" fill="#5cb85c" rx="3"/>
                            <text x="450" y="270" text-anchor="middle" fill="white" font-size="11">Event Loop</text>
                        </svg>
                    </div>
                </div>
                
                <h3 class="section-subtitle">架构特点</h3>
                <table class="info-table">
                    <thead>
                        <tr><th>组件</th><th>职责</th><th>特点</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><strong>Master 进程</strong></td><td>读取配置、管理 Worker 进程</td><td>不处理请求</td></tr>
                        <tr><td><strong>Worker 进程</strong></td><td>处理客户端连接、执行业务逻辑</td><td>独立运行</td></tr>
                        <tr><td><strong>Event Loop</strong></td><td>监听事件、处理 I/O 操作</td><td>异步非阻塞</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

</body>
</html>
