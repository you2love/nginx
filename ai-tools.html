<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nginx 核心功能</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Nginx</h1>
                <p class="tagline">AI时代的高性能Web服务器</p>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link">首页</a>
                <a href="commands.html" class="nav-link">指令与配置</a>
                <a href="ai-tools.html" class="nav-link active ai-highlight">核心功能</a>
                <a href="practice.html" class="nav-link">实战篇</a>
                <a href="resources.html" class="nav-link">学习资源</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <h2 class="section-title">🚀 Nginx 核心功能与架构</h2>
                <div class="content-grid">
                    <div class="content-card">
                        <h3>⚡ 高性能架构</h3>
                        <ul>
                            <li><strong>事件驱动模型</strong> - 采用 epoll/kqueue 机制，单进程可处理数万并发连接</li>
                            <li><strong>异步非阻塞</strong> - 零拷贝技术（sendfile），减少内核态与用户态切换</li>
                            <li><strong>低内存占用</strong> - 10,000 个非活动 HTTP 连接仅占用约 2.5MB 内存</li>
                            <li><strong>高并发处理</strong> - 单台服务器可轻松处理 5 万+ 并发连接</li>
                        </ul>
                    </div>
                    <div class="content-card">
                        <h3>🔄 反向代理</h3>
                        <ul>
                            <li><strong>负载均衡</strong> - 支持轮询、最少连接、IP哈希、加权等多种算法</li>
                            <li><strong>健康检查</strong> - 自动检测后端服务器状态，剔除故障节点</li>
                            <li><strong>会话保持</strong> - IP哈希实现基于客户端IP的会话粘性</li>
                            <li><strong>动态权重调整</strong> - 根据服务器性能动态调整权重分配</li>
                        </ul>
                    </div>
                    <div class="content-card">
                        <h3>🔐 安全特性</h3>
                        <ul>
                            <li><strong>SSL/TLS 终止</strong> - 支持 HTTP/2、TLS 1.3，高性能 HTTPS 加速</li>
                            <li><strong>访问控制</strong> - IP 白/黑名单、基本认证、基于地理位置的访问限制</li>
                            <li><strong>防 DDoS</strong> - 连接限流（limit_req）、速率限制（limit_conn）</li>
                            <li><strong>请求过滤</strong> - 支持自定义过滤规则，阻止恶意请求</li>
                        </ul>
                    </div>
                    <div class="content-card">
                        <h3>📦 静态资源服务</h3>
                        <ul>
                            <li><strong>高效缓存</strong> - 支持 expires、cache-control 头部设置</li>
                            <li><strong>静态文件压缩</strong> - gzip/brotli 压缩，节省带宽</li>
                            <li><strong>范围请求</strong> - 支持断点续传，视频流媒体服务</li>
                            <li><strong>Sendfile 零拷贝</strong> - 直接内核态文件传输，CPU 使用率极低</li>
                        </ul>
                    </div>
                    <div class="content-card">
                        <h3>🌐 虚拟主机</h3>
                        <ul>
                            <li><strong>基于域名</strong> - server_name 指令支持多域名绑定</li>
                            <li><strong>基于端口</strong> - 监听不同端口，实现多服务部署</li>
                            <li><strong>基于 IP</strong> - 支持多网卡、多 IP 地址配置</li>
                            <li><strong>通配符匹配</strong> - 支持泛域名和正则表达式匹配</li>
                        </ul>
                    </div>
                    <div class="content-card">
                        <h3>🎯 负载均衡策略</h3>
                        <ul>
                            <li><strong>轮询（Round Robin）</strong> - 默认策略，按顺序分发请求</li>
                            <li><strong>最少连接（Least Connections）</strong> - 分发到连接数最少的服务器</li>
                            <li><strong>IP哈希（IP Hash）</strong> - 基于客户端IP哈希，同一IP固定访问同一后端</li>
                            <li><strong>加权轮询</strong> - 根据服务器性能分配不同权重</li>
                        </ul>
                    </div>
                </div>

                <div class="ai-tools-detail">
                    <h3>🏗️ 核心模块体系</h3>
                    <div class="tools-combination">
                        <div class="tool-combo">
                            <h4>核心模块</h4>
                            <pre><code>ngx_http_core_module   - HTTP 核心功能
ngx_event_module      - 事件处理机制
ngx_mail_module       - 邮件代理功能
ngx_stream_module     - TCP/UDP 代理</code></pre>
                        </div>
                        <div class="tool-combo">
                            <h4>HTTP 处理模块</h4>
                            <pre><code>ngx_http_proxy_module     - HTTP 反向代理
ngx_http_upstream_module - 上游服务器管理
ngx_http_ssl_module      - SSL/TLS 支持
ngx_http_gzip_module     - 压缩模块</code></pre>
                        </div>
                        <div class="tool-combo">
                            <h4>第三方模块</h4>
                            <pre><code>ngx_http_lua_module     - Lua 脚本支持
ngx_cache_purge        - 缓存清除
ngx_http_substitutions - 内容替换
nginx-rtmp-module      - 流媒体服务

# RTMP 流媒体配置示例
rtmp {
    server {
        listen 1935;
        chunk_size 4096;
        
        application live {
            live on;
            record off;
            hls on;
            hls_path /tmp/hls;
            hls_fragment 3;
        }
        
        application vod {
            play /var/videos;
        }
    }
}

# HLS 点播配置
server {
    listen 8080;
    location /hls {
        types {
            application/vnd.apple.mpegurl m3u8;
            video/mp2t ts;
        }
        root /tmp;
        add_header Cache-Control no-cache;
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

</body>
</html>